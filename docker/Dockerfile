# >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
# DO NOT EDIT THIS FILE. IT IS AUTO_GENERATED
# >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
FROM cyberdojofoundation/gplusplus
# >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
# START of extra commands to fulfil runner's requirements (os=Debian)
RUN (getent group sandbox) || (addgroup --gid 51966 sandbox)
RUN (grep -q sandbox:x:41966 /etc/passwd) || (adduser --disabled-password --gecos "" --home /home/sandbox --ingroup sandbox --shell /bin/bash --uid 41966 sandbox)
#RUN apt-get update && apt-get install --yes coreutils bash tar file
# END of extra commands to fulfil runner's requirements
# >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

LABEL maintainer=james@wingman-sw.com

RUN mkdir /fff
COPY fff.h /fff
RUN mkdir /wingman
COPY gen-xfakes.sh /wingman
COPY legacy-build.sh /wingman
COPY tdd-build.sh /wingman
COPY install.sh .

RUN apk add --no-cache gcc g++ musl-dev make
RUN apk add --no-cache autoconf automake git libtool
RUN cd /
RUN wget https://github.com/cpputest/cpputest/releases/download/latest-passing-build/cpputest-latest.tar.gz
RUN tar -xf ./cpputest-latest.tar.gz
RUN rm ./cpputest-latest.tar.gz
RUN mv cpputest-latest cpputest
RUN cd cpputest/ &&  autoreconf . -i && ./configure && make


#RUN sh install.sh && rm ./install.sh
COPY red_amber_green.rb /usr/local/bin
